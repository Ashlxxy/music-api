@startuml
' === Global Styling ===
skinparam backgroundColor #f8f9fa
skinparam classAttributeIconSize 0
skinparam shadowing true
skinparam dpi 150
skinparam ArrowColor #5a5a5a
skinparam classFontColor #202020
skinparam classFontStyle bold
skinparam classBackgroundColor #ffffff
skinparam stereotypeCBackgroundColor #E3F2FD
skinparam stereotypeCFontColor #0D47A1
left to right direction

<style>
.class {
  BackgroundColor white;
  BorderColor black;
  FontColor #1a1a1a;
  FontSize 12;
}
.classDiagram {
  LineColor #6c757d;
}
.interface {
  BackgroundColor #E0F7FA;
  FontColor #006064;
  BorderColor #006064;
}
.abstract {
  BackgroundColor #FFF3E0;
  FontColor #E65100;
  BorderColor #E65100;
}
.note {
  BackgroundColor #FFECB3;
  BorderColor #FFB300;
}
</style>

' === INTERFACES & ABSTRACT ===
interface ISearchable <<interface>> #E0F7FA {
  + List<Song> search(String query)
}

interface IPlayable <<interface>> #E0F7FA {
  + play()
  + pause()
  + stop()
  + next()
  + previous()
}

abstract class Account <<abstract>> #FFF3E0 {
  - int id
  - String username
  - String email
  - String passwordHash
  # Date createdAt
  + login(String username, String password) : boolean
  + logout() : void
  + getProfile() : Map
}

note right of Account
<b>Abstract Class</b> untuk mewariskan atribut umum
seperti <i>username</i> dan <i>passwordHash</i>.
end note

' === USER CLASSES ===
class User <<entity>> #E8F5E9 {
  - String displayName
  - String avatarUrl
  - boolean isActive
  - List<Playlist> playlists
  - List<PlayRecord> history
  + likeSong(Song s) : Like
  + commentSong(Song s, String text) : Comment
  + createPlaylist(String name) : Playlist
  + addToPlaylist(Playlist p, Song s) : void
}

class Admin <<controller>> #FFEBEE {
  - List<String> moderationLogs
  + createSong(Song s) : boolean
  + updateSong(int songId, Song s) : boolean
  + deleteSong(int songId) : boolean
  + moderateComment(int commentId, Action a) : void
  + respondFeedback(int feedbackId, String response) : void
}

' === SONG / ALBUM / ARTIST ===
class Song <<model>> #E3F2FD {
  - int id
  - String title
  - int durationSeconds
  - String filePath
  - int playCount
  - int likeCount
  - Date releaseDate
  - Booklet booklet
  + incrementPlayCount() : void
  + incrementLike() : void
}

class Artist <<model>> #E3F2FD {
  - int id
  - String name
  - String bio
  - List<Song> songs
}

class Album <<model>> #E3F2FD {
  - int id
  - String title
  - Date releaseDate
  - List<Song> tracks
}

class Genre <<model>> #E3F2FD {
  - int id
  - String name
}

' === PLAYLIST ===
class Playlist <<feature>> #F1F8E9 {
  - int id
  - String name
  - boolean isPublic
  - User owner
  - List<PlaylistItem> items
  + addSong(Song s) : void
  + removeSong(Song s) : void
  + reorder(int fromIdx, int toIdx) : void
}

class PlaylistItem #F1F8E9 {
  - int position
  - Song song
}

' === FEEDBACK / COMMENT / LIKE ===
class Feedback <<feature>> #FFF3E0 {
  - int id
  - User user
  - String message
  - Date submittedAt
  - String status
}

class Comment <<feature>> #FFF3E0 {
  - int id
  - User author
  - Song song
  - String content
  - Date createdAt
  - boolean isHidden
  + edit(String newContent) : void
}

class Like <<feature>> #FFF3E0 {
  - int id
  - User user
  - Song song
  - Date likedAt
}

' === HISTORY & PLAYER ===
class PlayRecord <<entity>> #E8EAF6 {
  - int id
  - User user
  - Song song
  - Date playedAt
  - int positionSeconds
}

class PlayHistory <<feature>> #E8EAF6 {
  - User owner
  - List<PlayRecord> records
  + addRecord(Song s, int position) : void
  + getRecent(int limit) : List<PlayRecord>
}

class MusicPlayer <<controller>> #F3E5F5 {
  - Song currentSong
  - Queue<Song> queue
  - boolean isPlaying
  + play() : void
  + pause() : void
  + stop() : void
  + next() : void
  + previous() : void
  + toggleRepeat() : void
}

' === STATISTICS / SERVICES ===
class Statistics <<service>> #E1F5FE {
  + getTopByPlays(int limit) : List<Song>
  + getTopByLikes(int limit) : List<Song>
  + updateMetrics(Song s) : void
}

class PopularityCalculator <<service>> #E1F5FE {
  + calculateScore(Song s) : double
}

class SearchService <<service>> #E1F5FE {
  + search(String q) : List<Song>
}

' === RELASI ===
Account <|-- User
Account <|-- Admin
User "1" *-- "*" Playlist
Playlist "1" o-- "*" PlaylistItem
PlaylistItem --> Song
Song "1" o-- "1" Booklet
Song "*" -- "1" Artist
Album "1" o-- "*" Song
User "1" o-- "*" PlayRecord
PlayHistory "1" o-- "*" PlayRecord
User "1" -- "*" Like
User "1" -- "*" Comment
Song "1" -- "*" Comment
Song "1" -- "*" Like
MusicPlayer --> Song
SearchService ..|> ISearchable
MusicPlayer ..|> IPlayable
Statistics --> Song
PopularityCalculator --> Song
Feedback "*" -- "1" User

note as N1 #FFECB3
<b>Layout Horizontal</b><br>
Diagram ini sudah diatur agar terbaca dari kiri ke kanan menggunakan `left to right direction`.
end note

@enduml

link :
https://uml.planttext.com/plantuml/svg/dLXjSzeu4FxE3Fz1ayxSfIz9e6cIzeuoPuZTC2LfBYOtqsyLjW0DjaKbEIcztd-_bMGPoP1qccG6Yztrxchrx8luIqZCPPbdxTRlwFtxz-X3ngOuGx5SPxIOArAx9PQqM66ESpJ5oNBEMLcaGvOnZfxDtixUpR0hacHOY41AJgUb9AE45J7zJb37bH4BdB9xfL_oahYST4LHzyGJ3ZXdzvMv4wp-jyn5h92LnEkE-jyfeVP4q9HbwHPxiBKl_UVvB0adJAvNPBWb7Hv7hwFp1wGTvphdRyw2RhkLaPb4aY5Evmk9Kif98YahsgrsgoUKb_rswr0xXlvjjn1g6hnVK4d-r1p6Ky8DTPg1cAOw9hjO_TTKVHRTr_3zFslYdEAvSbbR6jE2L6-U9cSdPsabIGlOq0mdPBT3py9ET1O5JUETpcddzCsMenkwKesdGdASo0SqHr5q77QQciFJaswdiwsvfYlD1PCF-Hj5uN1mlFr-50sExVkz8tiMDZb6LvFm9Wg6OOn-Gy4Wdjm4mud9aKs0HZ71F5dWAO2jrwlf_RwDad7f9SHQo5xCYdaV2VtAVWnP0qdnjIHy_Lpxu2c-pl3wvsfN8BN_l5hZKX3xHKYsikk2V9Er42Ttb9LYtvgiJyH0C4WIY9m4gvQXZ9fpCKOF4FY3Q6hMrIx0CYzmJZmYoJ7DFCeAJDp34LnWiL2CP-WSmx4bdC0Z3QJnCMDpMkmtDBzgwdYE_e3yPXd1HVqQAs6ZGBzZnh-NQ4xaDMSpcX7DkCIhQjyQBoOdsSnk6t0mxGSs8aCLaTxHj8-0LIvHJkunfsA92uHDoKDbNkPG2iYAS4bHZ_QjkxqZsaSfI0BDtRMY7xPRf4YHyc03jziul473SH3703YDCdCWjw0GJeCKaigr1i3Rw2HyPy-Y2afAXOB2LVC8y1s6cd_BgsEeueMe2A08tLMo6fiARnai-XfJQYKQt1kIm2RwQ044njTLqEcIA5ZlgmyaL8p7G3BCXEKvEExmwrEKW4abF3GYbRp6WVN48a25KubQkf75QJfXjQXTe1LOg3qnCD37NQ4xpIaSIGyQbUGiomWtw0u7OMWZQZ9Lc-wZd46vmAfUZzbSk5usDkqXiLobLaBbYe35A7KTywHJaf4jwIsfoXDI1KoBLl5LkWFTL13sqS-9MB4YZGX9LJVNBysgBzeZ4s4Z9aWZPWQOyQUh3-W81UF1xQLwtan6ySH5gDvMhwSSp3H0TODyf5W0aZEouQQbYN0C-2fIuOcgnBt6Sh6HLkWScbor98L1XwHB2eUWOa7Ksb07Z2qXpYgewcdYGmiuJ1N2QwkrKJvg0GNg_TsOWimNyfS2i5KffvIvu3Dj0Zw5RocRblbJ8xqxAeuzLVEMli4FfE3a2Jjpq7Cz3ZwF6u2faxNNcq4gbLmtjgWRlTtKjKUZjYbZr-KqeucXwah9xWl2TvIraIHv7y4abOkwVZHIs4sRdDqrCznbwod2P1Dd-IZzzaexB1aiTuB4TMFNLbTCK3CLwWrhe_3XXJ8Am_D1CFm8IJZyT7aPNarWDHvz3DtOsbHlnFR1_gs3ffgM5-gS287dBd94ESsfh9jqBGbN2bdwgAagr2zvW4kvO7nhzuuXLRA9b-BUrE22ueAcAQdA9adfff4Gk5feBJlFIANuKyFckwpTKrL9E-SSuGLamgURpp1Ggho0Xj_82jDY6-q-3ABJ9_gWYkKcGYxGwcBR0Ec5QUv-77mV7impEo1m_TpacQ7N4u3hnjQm1hAsksKK46S62j-0v_HbAMYYc7fCQZJsu_0aEgb79MK_AJclHX93_Ria9QbAu5UrtYene9iQQJjlUqvNOxT7CzEtHp93kFzcFOjxPCdcyupSm4o9PRFbL2rv4gWcF1h6K05WRlndDFI7nXYo4e964m4nWUEwezNbeHkTHA6zF42u9smrMAiTYXqXrq7nHLME_4JK33-N178k4LlrquKRMvKP3DHoFSHP0ai0tcFk9fKKYG45nD6SCkW2nDDjhcMnKVMOqiPbhBaX9-Wt8Gpd8nFb-fRquy3aGuEavynsIsVANdSFlG3QteizPuIjUw1YimPRTOcDYEuP1mTzP42hzrs_1S-1dMWC1_HK33EPW6jwRd0D6KsrUwvzasF6kYq63ydK2YgUcVoRr7h4hpt_6SFeSJFRsRvtieU7F_hk9Tn_ot3jJHhUtQJ5Hk5E66xOTKDr0cjElBf3Oe6kklP71ds17ECrN4JH1UFqEzGZdAaxP6_A0K_sznTQK6YfALx0pKsLMOJdcCEbY8Cf3FT6Jj6IgW-2uBe9TGW2DP-N1LQNpoyF_AJqfN6n_0k-b7dsFm00